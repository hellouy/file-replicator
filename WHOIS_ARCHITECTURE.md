# WHOIS æœåŠ¡å™¨æœ¬åœ°è¡¥å……ç³»ç»Ÿ - æ¶æ„æ–‡æ¡£

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·åº”ç”¨å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  React ç»„ä»¶ / API è·¯ç”± / Edge Function                          â”‚
â”‚  â”œâ”€ DomainLookup.tsx                                            â”‚
â”‚  â”œâ”€ WhoisChecker.tsx                                            â”‚
â”‚  â””â”€ /api/whois/server/[tld].ts                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WHOIS æœåŠ¡å™¨ç®¡ç†å±‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  whoisServerManager.ts                                          â”‚
â”‚  â”œâ”€ getWhoisServerAddress()      [è‡ªåŠ¨æŸ¥è¯¢æœ¬åœ°/Supabase]       â”‚
â”‚  â”œâ”€ getWhoisServersForTlds()     [æ‰¹é‡æŸ¥è¯¢]                    â”‚
â”‚  â”œâ”€ clearWhoisServerCache()      [æ¸…é™¤ç¼“å­˜]                    â”‚
â”‚  â””â”€ getWhoisServerCacheStats()   [è·å–ç»Ÿè®¡]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚              â”‚              â”‚                â”‚
      â–¼              â–¼              â–¼                â–¼
  æœ¬åœ°åˆ—è¡¨      Supabase æŸ¥è¯¢   ç¼“å­˜ç®¡ç†       é”™è¯¯å¤„ç†
```

---

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 1. å‰ç«¯å±‚

#### A. React ç»„ä»¶é›†æˆ

```
DomainLookup.tsx
    â”‚
    â”œâ”€ è¾“å…¥åŸŸå (e.g., example.td)
    â”‚
    â”œâ”€ æå– TLD
    â”‚
    â”œâ”€ è°ƒç”¨ whoisServerManager
    â”‚    â”‚
    â”‚    â”œâ”€ isTldInLocalList()     âœ“ æ£€æŸ¥æœ¬åœ°æ”¯æŒ
    â”‚    â”‚
    â”‚    â””â”€ getWhoisServerAddress()
    â”‚         â”œâ”€ è¿”å›: { server, source }
    â”‚         â””â”€ æ˜¾ç¤ºåˆ° UI
    â”‚
    â””â”€ æ‰§è¡Œ WHOIS æŸ¥è¯¢
```

#### B. Hook é›†æˆ

```
useWhoisServer(tld)
    â”‚
    â”œâ”€ åˆå§‹åŒ–çŠ¶æ€
    â”‚    â”œâ”€ server: null
    â”‚    â”œâ”€ source: 'none'
    â”‚    â”œâ”€ loading: true
    â”‚    â””â”€ error: null
    â”‚
    â”œâ”€ useEffect è§¦å‘æŸ¥è¯¢
    â”‚
    â”œâ”€ è°ƒç”¨ getWhoisServerAddress()
    â”‚
    â””â”€ æ›´æ–°çŠ¶æ€å¹¶è¿”å›
```

---

### 2. æ•°æ®æºå±‚

#### A. æœ¬åœ°åˆ—è¡¨ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰

```
localWhoisServers.ts
    â”‚
    â”œâ”€ éæ´² (35+ TLD)
    â”‚    â”œâ”€ 'td': 'whois.nic.td'
    â”‚    â”œâ”€ 'cf': 'whois.nic.cf'
    â”‚    â”œâ”€ 'ke': 'whois.kenic.or.ke'
    â”‚    â””â”€ ...
    â”‚
    â”œâ”€ å¤ªå¹³æ´‹ (15+ TLD)
    â”‚    â”œâ”€ 'fj': 'whois.nic.fj'
    â”‚    â”œâ”€ 'ws': 'whois.nic.ws'
    â”‚    â””â”€ ...
    â”‚
    â”œâ”€ ä¸­äºš (6+ TLD)
    â”‚
    â”œâ”€ ä¸­ä¸œ (15+ TLD)
    â”‚
    â”œâ”€ å—äºš (6+ TLD)
    â”‚
    â”œâ”€ ä¸œå—äºš (5+ TLD)
    â”‚
    â”œâ”€ åŠ å‹’æ¯” (20+ TLD)
    â”‚
    â””â”€ å…¶ä»–ç‰¹æ®Š TLD
         â””â”€ å…± 100+ TLD
```

#### B. Supabase æ•°æ®åº“ï¼ˆå¤‡é€‰ï¼‰

```
whois_servers è¡¨
    â”‚
    â”œâ”€ Columns:
    â”‚    â”œâ”€ tld (VARCHAR, PRIMARY KEY)
    â”‚    â”œâ”€ server (VARCHAR)
    â”‚    â”œâ”€ updated_at (TIMESTAMP)
    â”‚    â””â”€ created_at (TIMESTAMP)
    â”‚
    â””â”€ ä» GitHub WHOIS åˆ—è¡¨åŒæ­¥
         â””â”€ sync-whois-servers Edge Function
```

#### C. ç¼“å­˜å±‚ï¼ˆå†…å­˜ï¼‰

```
whoisServerCache (Map)
    â”‚
    â”œâ”€ Key: 'td'
    â”œâ”€ Value: {
    â”‚    tld: 'td',
    â”‚    server: 'whois.nic.td',
    â”‚    source: 'local',
    â”‚    timestamp: 1708347600000
    â”‚  }
    â”‚
    â”œâ”€ TTL: 1 å°æ—¶ (3,600,000 ms)
    â”‚
    â””â”€ è‡ªåŠ¨è¿‡æœŸç®¡ç†
```

---

## ğŸ”„ æŸ¥è¯¢æµç¨‹è¯¦è§£

### å®Œæ•´çš„æŸ¥è¯¢åºåˆ—å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è°ƒç”¨: getWhoisServerAddress('td')                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ æ£€æŸ¥å†…å­˜ç¼“å­˜          â”‚
         â”‚ whoisServerCache.get() â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                â”‚           â”‚
          ç¼“å­˜å‘½ä¸­       ç¼“å­˜æœªå‘½ä¸­
                â”‚           â”‚
                â–¼           â–¼
            è¿”å›ç»“æœ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           (é€Ÿåº¦å¿«)    â”‚ æ£€æŸ¥æœ¬åœ°åˆ—è¡¨          â”‚
                       â”‚ getWhoisServer()    â”‚
                       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                             â”‚           â”‚
                         æ‰¾åˆ° âœ“      æœªæ‰¾åˆ° âœ—
                             â”‚           â”‚
                             â–¼           â–¼
                         ç¼“å­˜+è¿”å›   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ æŸ¥è¯¢ Supabase DB â”‚
                                    â”‚ supabase.from()  â”‚
                                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                                          â”‚         â”‚
                                      æ‰¾åˆ° âœ“     æœªæ‰¾åˆ° âœ—
                                          â”‚         â”‚
                                          â–¼         â–¼
                                    ç¼“å­˜+è¿”å›   è¿”å› null
                                                 (ä¸æ”¯æŒ)
```

### æ—¶é—´å¤æ‚åº¦åˆ†æ

```
åœºæ™¯ 1: ç¼“å­˜å‘½ä¸­
  æ—¶é—´: O(1) - ç›´æ¥å†…å­˜æŸ¥æ‰¾
  å»¶è¿Ÿ: < 1ms

åœºæ™¯ 2: æœ¬åœ°åˆ—è¡¨å‘½ä¸­
  æ—¶é—´: O(1) - å¯¹è±¡å±æ€§æŸ¥æ‰¾
  å»¶è¿Ÿ: < 1ms

åœºæ™¯ 3: Supabase æŸ¥è¯¢
  æ—¶é—´: O(n) - æ•°æ®åº“æŸ¥è¯¢
  å»¶è¿Ÿ: 50-200ms (å–å†³äºç½‘ç»œå’Œæ•°æ®åº“)

æœ€åæƒ…å†µ: æ‰€æœ‰æ¥æºéƒ½æ— æ³•è·å–
  æ—¶é—´: O(1) - ç›´æ¥è¿”å› null
  å»¶è¿Ÿ: ~100ms (ç­‰å¾… Supabase è¶…æ—¶)
```

---

## ğŸ“Š æ•°æ®æµå›¾

### å‰ç«¯æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·è¾“å…¥åŸŸå                      â”‚
â”‚ e.g., "example.td"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è§£æ TLD                           â”‚
â”‚ "example.td" â†’ "td"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è°ƒç”¨ whoisServerManager            â”‚
â”‚ getWhoisServerAddress('td')      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                   â”‚          â”‚
      â–¼                   â–¼          â–¼
   æœ¬åœ°æŸ¥è¯¢            Supabase      ç¼“å­˜
   å¿«é€Ÿè¿”å›          æ•°æ®åº“æŸ¥è¯¢      ç®¡ç†
                                    
      â”‚                   â”‚          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ è¿”å›ç»“æœ        â”‚
        â”‚ {              â”‚
        â”‚   server,      â”‚
        â”‚   source       â”‚
        â”‚ }              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ åœ¨ UI ä¸­æ˜¾ç¤º    â”‚
        â”‚ æˆ–è¿›è¡ŒæŸ¥è¯¢      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ é›†æˆç‚¹

### é›†æˆç‚¹ 1: React ç»„ä»¶

```typescript
// åœ¨ React ç»„ä»¶ä¸­
import { getWhoisServerAddress } from '@/lib/whoisServerManager';

export function MyComponent({ domain }) {
  const [whoisInfo, setWhoisInfo] = useState(null);

  useEffect(() => {
    const tld = domain.split('.').pop();
    
    (async () => {
      const result = await getWhoisServerAddress(tld);
      setWhoisInfo(result);
    })();
  }, [domain]);

  return (
    <div>
      {whoisInfo && (
        <p>WHOIS Server: {whoisInfo.server} ({whoisInfo.source})</p>
      )}
    </div>
  );
}
```

### é›†æˆç‚¹ 2: API è·¯ç”±

```typescript
// åœ¨ Next.js API è·¯ç”±ä¸­
import { getWhoisServerAddress } from '@/lib/whoisServerManager';

export default async function handler(req, res) {
  const { tld } = req.query;
  const result = await getWhoisServerAddress(tld);
  res.json(result);
}
```

### é›†æˆç‚¹ 3: Edge Function

```typescript
// åœ¨ Supabase Edge Function ä¸­
import { getLocalWhoisServer } from './local-whois-supplement';

export async function queryWhoisServer(tld) {
  // ä¼˜å…ˆä½¿ç”¨æœ¬åœ°åˆ—è¡¨
  const localServer = getLocalWhoisServer(tld);
  if (localServer) return localServer;

  // æ¬¡é€‰ Supabase æ•°æ®åº“
  const { data } = await supabase
    .from('whois_servers')
    .select('server')
    .eq('tld', tld)
    .single();

  return data?.server || null;
}
```

---

## ğŸ—„ï¸ æ–‡ä»¶ä¾èµ–å…³ç³»

```
src/
â”œâ”€ lib/
â”‚  â”œâ”€ localWhoisServers.ts
â”‚  â”‚   â””â”€ å¯¼å‡º: LOCAL_WHOIS_SERVERS, getWhoisServer(), ...
â”‚  â”‚
â”‚  â””â”€ whoisServerManager.ts
â”‚      â”œâ”€ å¯¼å…¥: localWhoisServers.ts, supabase client
â”‚      â””â”€ å¯¼å‡º: getWhoisServerAddress(), ...
â”‚
â”œâ”€ components/
â”‚  â””â”€ DomainLookup.tsx
â”‚      â””â”€ å¯¼å…¥: whoisServerManager.ts
â”‚
â””â”€ hooks/
   â””â”€ useWhoisServer.ts
       â””â”€ å¯¼å…¥: whoisServerManager.ts

supabase/
â””â”€ functions/
   â””â”€ domain-lookup/
      â”œâ”€ index.ts
      â”‚  â””â”€ å¯¼å…¥: local-whois-supplement.ts
      â”‚
      â””â”€ local-whois-supplement.ts
         â””â”€ å¯¼å‡º: getLocalWhoisServer(), ...
```

---

## âš™ï¸ ä¼˜å…ˆçº§ç³»ç»Ÿ

### æŸ¥è¯¢ä¼˜å…ˆçº§é¡ºåº

```
ä¼˜å…ˆçº§ 1 (æœ€é«˜): æœ¬åœ°åˆ—è¡¨
  â”œâ”€ localWhoisServers.ts (å‰ç«¯)
  â””â”€ local-whois-supplement.ts (Edge Function)
  â””â”€ ç‰¹ç‚¹: å¿«é€Ÿã€å¯é ã€æ— ç½‘ç»œè¯·æ±‚

ä¼˜å…ˆçº§ 2: Supabase æ•°æ®åº“
  â”œâ”€ whois_servers è¡¨
  â”œâ”€ å®šæœŸä» GitHub åŒæ­¥
  â””â”€ ç‰¹ç‚¹: å¯åŠ¨æ€æ›´æ–°ã€è¦†ç›–é¢å¹¿

ä¼˜å…ˆçº§ 3 (æœ€ä½): æ— æ³•è·å–
  â”œâ”€ è¿”å› null
  â””â”€ éœ€è¦å›é€€ç­–ç•¥ (HTTP æŸ¥è¯¢ç­‰)
```

### ä¼˜å…ˆçº§è¦†ç›–ç¤ºä¾‹

```
åœºæ™¯: æŸ¥è¯¢ 'td'

æ­¥éª¤ 1: æœ¬åœ°æŸ¥è¯¢
  getLocalTlds().includes('td') âœ“
  â†’ è¿”å› 'whois.nic.td' (æ¥æº: local)

å¦‚æœæ²¡æœ‰æœ¬åœ°æ”¯æŒ:
  
æ­¥éª¤ 2: Supabase æŸ¥è¯¢
  supabase.from('whois_servers')
    .eq('tld', 'td') âœ“
  â†’ è¿”å› 'whois.nic.td' (æ¥æº: supabase)

å¦‚æœ Supabase ä¹Ÿæ²¡æœ‰:
  
æ­¥éª¤ 3: è¿”å› null
  â†’ æ¥æº: none
  â†’ æ— æ³•æŸ¥è¯¢
```

---

## ğŸ’¾ ç¼“å­˜ç­–ç•¥

### ç¼“å­˜ç»“æ„

```typescript
interface WhoisServerCache {
  tld: string;           // 'td'
  server: string | null; // 'whois.nic.td'
  source: 'local' | 'supabase' | 'none';
  timestamp: number;     // Date.now()
}
```

### ç¼“å­˜æ—¶é—´çº¿

```
T=0s    æŸ¥è¯¢ 'td'
â”œâ”€ ç¼“å­˜æœªå‘½ä¸­
â”œâ”€ æœ¬åœ°æŸ¥è¯¢ âœ“
â”œâ”€ å­˜å…¥ç¼“å­˜
â””â”€ è¿”å›ç»“æœ

T=30s   æŸ¥è¯¢ 'td'
â”œâ”€ ç¼“å­˜å‘½ä¸­ âœ“
â””â”€ ç›´æ¥è¿”å› (é€Ÿåº¦å¿« 100 å€)

T=3600s (1å°æ—¶å)
â”œâ”€ ç¼“å­˜è¿‡æœŸ (TTL = 1 å°æ—¶)
â”œâ”€ é‡æ–°æŸ¥è¯¢
â””â”€ æ›´æ–°ç¼“å­˜
```

### ç¼“å­˜ç®¡ç† API

```typescript
// è·å–ç¼“å­˜ç»Ÿè®¡
const stats = getWhoisServerCacheStats();
// {
//   size: 50,
//   entries: [
//     { tld: 'td', source: 'local' },
//     { tld: 'com', source: 'supabase' },
//     ...
//   ]
// }

// æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜
clearWhoisServerCache();
```

---

## ğŸ” å®‰å…¨æ€§è€ƒè™‘

### è¾“å…¥éªŒè¯

```
TLD è¾“å…¥
  â†“
â”œâ”€ æ£€æŸ¥ç±»å‹: string âœ“
â”œâ”€ æ£€æŸ¥é•¿åº¦: 2-6 å­—ç¬¦ âœ“
â”œâ”€ æ£€æŸ¥æ ¼å¼: åªå…è®¸å­—æ¯ âœ“
â”œâ”€ è½¬æ¢å°å†™ âœ“
â””â”€ ç§»é™¤å‰å¯¼ç‚¹ âœ“
  â†“
å¤„ç†æŸ¥è¯¢
```

### é”™è¯¯å¤„ç†

```
å¼‚å¸¸æƒ…å†µ:
â”œâ”€ Supabase è¿æ¥å¤±è´¥
â”‚   â””â”€ ä»ç„¶å¯ä»¥ä½¿ç”¨æœ¬åœ°åˆ—è¡¨
â”œâ”€ ç¼“å­˜è·å–å¤±è´¥
â”‚   â””â”€ å›é€€åˆ°æ•°æ®åº“æŸ¥è¯¢
â””â”€ æ— æ•ˆ TLD
    â””â”€ è¿”å› null
```

---

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

### åŸºå‡†æµ‹è¯•é¢„æœŸ

```
æ“ä½œ                  å»¶è¿Ÿ          è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æœ¬åœ°æŸ¥è¯¢             < 1ms        ç›´æ¥å¯¹è±¡æŸ¥æ‰¾
ç¼“å­˜å‘½ä¸­             < 1ms        å†…å­˜è®¿é—®
Supabase æŸ¥è¯¢        50-200ms     ç½‘ç»œè¯·æ±‚
æ‰¹é‡æŸ¥è¯¢ (10 ä¸ªTLD)  < 10ms       ç¼“å­˜+æœ¬åœ°

ç¼“å­˜å‘½ä¸­ç‡é¢„æœŸ: 80-90%
æ•´ä½“å¹³å‡å»¶è¿Ÿ: 5-20ms
```

### ä¼˜åŒ–æœºä¼š

```
1. é¢„åŠ è½½å¸¸ç”¨ TLD
   â”œâ”€ åº”ç”¨å¯åŠ¨æ—¶æ‰¹é‡æŸ¥è¯¢
   â””â”€ å¯å°†ç¼“å­˜å‘½ä¸­ç‡æå‡è‡³ 95%+

2. ä½¿ç”¨ Web Worker
   â”œâ”€ å°†æŸ¥è¯¢ç§»åˆ°åå°çº¿ç¨‹
   â””â”€ ä¸é˜»å¡ä¸»çº¿ç¨‹

3. æŒä¹…åŒ–ç¼“å­˜
   â”œâ”€ ä½¿ç”¨ localStorage/IndexedDB
   â””â”€ è·¨ä¼šè¯ä¿ç•™ç¼“å­˜
```

---

## ğŸ§ª æµ‹è¯•æ¶æ„

### å•å…ƒæµ‹è¯•

```
æµ‹è¯•è¦†ç›–:
â”œâ”€ localWhoisServers.ts
â”‚  â”œâ”€ æ£€æŸ¥ TLD æ˜¯å¦å­˜åœ¨
â”‚  â”œâ”€ è¿”å›å€¼æ ¼å¼æ£€æŸ¥
â”‚  â””â”€ åˆ—è¡¨å®Œæ•´æ€§æ£€æŸ¥
â”‚
â”œâ”€ whoisServerManager.ts
â”‚  â”œâ”€ ç¼“å­˜åŠŸèƒ½
â”‚  â”œâ”€ ä¼˜å…ˆçº§é¡ºåº
â”‚  â”œâ”€ é”™è¯¯å¤„ç†
â”‚  â””â”€ ç»Ÿè®¡ä¿¡æ¯
â”‚
â””â”€ é›†æˆæµ‹è¯•
   â”œâ”€ ä¸ Supabase äº¤äº’
   â”œâ”€ Edge Function è°ƒç”¨
   â””â”€ ç«¯åˆ°ç«¯æµç¨‹
```

### é›†æˆæµ‹è¯•æµç¨‹

```
å¯åŠ¨ â†’ åˆå§‹åŒ–ç¼“å­˜ â†’ æ‰§è¡ŒæŸ¥è¯¢ â†’ éªŒè¯ç»“æœ â†’ æ¸…ç†èµ„æº â†’ å®Œæˆ
```

---

## ğŸ“‹ éƒ¨ç½²æ¸…å•

### å‰ç½®æ¡ä»¶

- [ ] Node.js 14+
- [ ] TypeScript æ”¯æŒ
- [ ] Supabase å·²é…ç½®
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸

### éƒ¨ç½²æ­¥éª¤

1. **å¤åˆ¶æ–‡ä»¶**
   ```
   src/lib/localWhoisServers.ts
   src/lib/whoisServerManager.ts
   supabase/functions/domain-lookup/local-whois-supplement.ts
   ```

2. **æ›´æ–°å¯¼å…¥**
   ```typescript
   import { getWhoisServerAddress } from '@/lib/whoisServerManager';
   ```

3. **é›†æˆä»£ç **
   - å‚è€ƒ WHOIS_INTEGRATION_EXAMPLES.md

4. **æµ‹è¯•éªŒè¯**
   - è¿è¡Œå•å…ƒæµ‹è¯•
   - éªŒè¯ç¼“å­˜å·¥ä½œ

5. **éƒ¨ç½²**
   - æ¨é€åˆ° Git
   - éƒ¨ç½²åˆ° Vercel

---

## ğŸ¯ æ¶æ„å†³ç­–

### ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å±‚æ¶æ„?

```
âœ“ æ¸…æ™°çš„èŒè´£åˆ†ç¦»
  â”œâ”€ æ•°æ®å±‚: ç®¡ç† WHOIS æœåŠ¡å™¨åœ°å€
  â”œâ”€ ä¸šåŠ¡å±‚: æŸ¥è¯¢é€»è¾‘å’Œç¼“å­˜ç®¡ç†
  â””â”€ è¡¨ç°å±‚: ç»„ä»¶å’Œ API è°ƒç”¨

âœ“ æ˜“äºç»´æŠ¤å’Œæ‰©å±•
  â”œâ”€ æ–°å¢ TLD åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶
  â”œâ”€ æŸ¥è¯¢é€»è¾‘é›†ä¸­ç®¡ç†
  â””â”€ ç¼“å­˜ç­–ç•¥ç‹¬ç«‹æ§åˆ¶

âœ“ é«˜å¯é æ€§
  â”œâ”€ å¤šæ•°æ®æºå¤‡ä»½
  â”œâ”€ ä¼˜é›…çš„é™çº§ç­–ç•¥
  â””â”€ å®Œå–„çš„é”™è¯¯å¤„ç†

âœ“ æ€§èƒ½ä¼˜åŒ–
  â”œâ”€ å¤šå±‚ç¼“å­˜
  â”œâ”€ æ— éœ€æ•°æ®åº“è¯·æ±‚ç”¨æœ¬åœ°æŸ¥è¯¢
  â””â”€ æ‰¹é‡æŸ¥è¯¢æ”¯æŒ
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´æŒ‡å—](./WHOIS_ENHANCEMENT_GUIDE.md) - è¯¦ç»†è¯´æ˜
- [å¿«é€Ÿå‚è€ƒ](./WHOIS_QUICK_REFERENCE.md) - å¿«é€ŸæŸ¥æ‰¾
- [é›†æˆç¤ºä¾‹](./WHOIS_INTEGRATION_EXAMPLES.md) - ä»£ç ç¤ºä¾‹
- [ç»´æŠ¤æŒ‡å—](./WHOIS_MAINTENANCE.md) - ç»´æŠ¤å’Œæ›´æ–°
- [æ€»ç»“æ–‡æ¡£](./WHOIS_ENHANCEMENT_SUMMARY.md) - æ–¹æ¡ˆæ€»ç»“

---

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2024 å¹´ 2 æœˆ 19 æ—¥  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
